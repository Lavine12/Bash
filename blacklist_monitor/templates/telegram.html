{% extends 'base.html' %}
{% block content %}
<h1>Telegram Settings</h1>
<h2>Add New</h2>
<form method="post">
    <input type="hidden" name="action" value="Add">
    <label>Bot Token:</label>
    <input type="text" name="token" class="telegram-input">
    <label>Chat ID:</label>
    <input type="text" name="chat_id" class="telegram-input">
    <label><input type="checkbox" name="active" checked> Active</label>
    <button type="submit">Add</button>
</form>

<h2>Saved Chats</h2>
{% for c in chats %}
<form method="post">
    <input type="hidden" name="row_id" value="{{ c[0] }}">
    <input type="text" name="token" value="{{ c[1] }}" class="telegram-input">
    <input type="text" name="chat_id" value="{{ c[2] }}" class="telegram-input">
    <label><input type="checkbox" name="active" {% if c[3] %}checked{% endif %}> Active</label>
    <button type="submit" name="action" value="Update">Update</button>
    <button type="submit" name="action" value="Delete">Delete</button>
</form>
{% endfor %}

<h2>Alert Settings</h2>
<form method="post">
    <input type="hidden" name="action" value="SaveMsg">
    <label>Alert Message:</label>
    <input type="text" name="alert_message" value="{{ message }}" class="telegram-input">
    <br>
    <label>Resend period:</label>
    <input type="number" name="resend_hours" value="0" placeholder="{{ resend_hours }}" min="0" class="telegram-input"> hours
    <input type="number" name="resend_minutes" value="0" placeholder="{{ resend_minutes }}" min="0" max="59" class="telegram-input"> minutes (0 = none)
    <br>
    <small>Current resend period: {{ resend_hours }} hours {{ resend_minutes }} minutes</small>
    <br>
    <button type="submit">Save</button>
    <button type="submit" name="action" value="Test">Test</button>
</form>
{% endblock %}
